<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>rtrace WASM Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .output {
            background: #f5f5f5;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        button {
            padding: 10px 15px;
            margin: 5px;
            background: #007cba;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background: #005a87;
        }
        input {
            padding: 8px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>rtrace WASM Demo</h1>
    
    <h2>Basic Function</h2>
    <button id="basic-btn">Call hello_world()</button>
    <div id="basic-output" class="output"></div>
    
    <h2>Function with Parameters</h2>
    <input type="text" id="name-input" placeholder="Enter your name" value="WebAssembly">
    <button id="param-btn">Call greet_with_name_and_log()</button>
    <div id="param-output" class="output"></div>
    
    <h2>Console Output</h2>
    <p>Check your browser's developer console for additional output from the WASM module.</p>
    
    <script type="module">
        import init, { 
            hello_world, 
            greet_with_name_and_log 
        } from './bindings/wasm/pkg/rtrace_wasm.js';
        
        async function run() {
            // Initialize the WASM module
            await init();
            
            // Basic function
            document.getElementById('basic-btn').addEventListener('click', () => {
                const result = hello_world();
                document.getElementById('basic-output').textContent = `Result: "${result}"`;
            });
            
            // Function with parameters
            document.getElementById('param-btn').addEventListener('click', () => {
                const name = document.getElementById('name-input').value || 'Anonymous';
                const result = greet_with_name_and_log(name);
                document.getElementById('param-output').textContent = `Result: "${result}"`;
            });
            
            // Show that the module is loaded
            document.body.insertAdjacentHTML('beforeend', 
                '<div class="output" style="background: #d4edda; color: #155724;">âœ… WASM module loaded successfully!</div>'
            );
        }
        
        run().catch(console.error);
    </script>
</body>
</html>